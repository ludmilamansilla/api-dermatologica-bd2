<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Consulta - API Dermatológica</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/consulta.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <div class="logo-nav"><i class="fas fa-heartbeat"></i><span>API Dermatológica</span></div>
            </div>
            <div class="navbar-center"><h1 class="navbar-title">Nueva Consulta</h1></div>
            <div class="navbar-right">
                <div class="user-menu">
                    <div class="user-avatar"><i class="fas fa-user-md"></i></div>
                    <div class="user-info"><span class="user-name" id="userName">Alumno</span><span class="user-role">Usuario</span></div>
                    <button class="btn-logout" id="logoutBtn"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </div>
    </nav>
    
    <main class="main-content">
        <div class="container" style="max-width: 900px;">
            <!-- Stepper -->
            <div class="stepper">
                <div class="step active" data-step="1">
                    <div class="step-icon"><i class="fas fa-user"></i></div>
                    <span class="step-label">Datos del Paciente</span>
                </div>
                <div class="step" data-step="2">
                    <div class="step-icon"><i class="fas fa-clipboard-list"></i></div>
                    <span class="step-label">Síntomas</span>
                </div>
                <div class="step" data-step="3">
                    <div class="step-icon"><i class="fas fa-check-circle"></i></div>
                    <span class="step-label">Confirmación</span>
                </div>
            </div>
            
            <form id="consultaForm" class="card">
                <!-- Paso 1: Datos del paciente -->
                <div class="form-step active" id="step1">
                    <h3>Datos del Paciente Virtual</h3>
                    <div class="form-group">
                        <label class="form-label">Nombre del Paciente <span class="required">*</span></label>
                        <input type="text" class="form-control" id="nombrePaciente" placeholder="Ej: Paciente Virtual #1234" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Zona Afectada <span class="required">*</span></label>
                        <select class="form-control" id="zonaAfectada" required>
                            <option value="">Seleccione una zona</option>
                            <option value="rostro">Rostro</option>
                            <option value="cuello">Cuello</option>
                            <option value="torax">Tórax</option>
                            <option value="abdomen">Abdomen</option>
                            <option value="brazos">Brazos</option>
                            <option value="piernas">Piernas</option>
                            <option value="manos">Manos</option>
                            <option value="pies">Pies</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Imagen de la Zona Afectada (Opcional)</label>
                        <div class="upload-area" id="uploadArea">
                            <input type="file" id="imagenZona" accept="image/*" hidden>
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Arrastra una imagen o haz clic</p>
                        </div>
                        <div id="imagePreview" style="display:none; margin-top:1rem;">
                            <img id="previewImg" style="max-width:100%; border-radius:8px;">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-accent" onclick="nextStep()">Siguiente <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <!-- Paso 2: Síntomas -->
                <div class="form-step" id="step2">
                    <h3>Seleccione los Síntomas Presentes</h3>
                    <div class="form-group">
                        <input type="text" class="form-control" id="searchSintomas" placeholder="Buscar síntomas...">
                    </div>
                    <div class="sintomas-grid" id="sintomasContainer">
                        <!-- Los síntomas se cargan dinámicamente desde la API -->
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="prevStep()"><i class="fas fa-arrow-left"></i> Anterior</button>
                        <button type="button" class="btn btn-accent" onclick="nextStep()">Siguiente <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <!-- Paso 3: Confirmación -->
                <div class="form-step" id="step3">
                    <h3>Confirme los Datos</h3>
                    <div class="resumen-card">
                        <h5><i class="fas fa-user"></i> Datos del Paciente</h5>
                        <p><strong>Nombre:</strong> <span id="resumenNombre">-</span></p>
                        <p><strong>Zona afectada:</strong> <span id="resumenZona">-</span></p>
                    </div>
                    <div class="resumen-card">
                        <h5><i class="fas fa-clipboard-list"></i> Síntomas Seleccionados</h5>
                        <div id="resumenSintomas"></div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="prevStep()"><i class="fas fa-arrow-left"></i> Anterior</button>
                        <button type="submit" class="btn btn-accent btn-lg">
                            <i class="fas fa-stethoscope"></i>
                            Realizar Diagnóstico
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>
    
    <div id="toast" class="toast"></div>
    <script src="js/common.js"></script>
    <script src="js/consulta-api.js"></script>
</body>
</html>
